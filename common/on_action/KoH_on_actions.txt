on_game_start = {
	on_actions = {
		KOH_ON_START
		#on_artifact_initialization
		KOH_Italian_Familes
		#KOH_investiture
	}
}

yearly_playable_pulse = {
	on_actions = {
		delay = { months = 2 }
    	#KOH_pulse_monthly
		KOH_yearly
	}
}

# # Called from code once a quarter for "playable" (count+) characters.
# # Root is the character
# # scope:quarter is which quarter it's for, from 1 to 4. Note that scope:quarter = 1 isn't necessarily in Q1 by calendar time
# quarterly_playable_pulse = {
# 	on_actions = {
# 		assassin_lifestyle_progress_pulse
# 	}
# }

# called when a siege completes. Does *not* fire on reoccupation by province order
# root is the occupant
# scope:barony is the barony title that got occupied
# scope:county is the county title for the barony
# scope:previous_controller is the previous controller of the county
# scope:war is the war causing the previous controller and the occupant to be hostile
# occupied_baronies is a list of all baronies that the siege caused the occupier to control (I.E., can include baronies with no fort level)
# on_siege_completion = {
# 	events = {
		
# 	}
# }

on_army_enter_province = {
	events = {
		tib_abu_yaqub_yusuf_death.9
	}
}

on_death = {
	on_actions = {
		on_kotr_death
	}
	events = {
		KoH_SicillianConflict.11
	}
}

on_kotr_death = {
	trigger ={
		has_court_position = King_of_the_germans_court_position
	}
	effect = {
		if = {
			limit = {
				exists = title:k_king_of_the_germans.holder
				scope:employee = title:k_king_of_the_germans.holder
			}
			destroy_title = title:k_king_of_the_germans
		}
	}
}

KOH_holy_orders = {
	effect = {
		character:223523 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				}
				trigger_event = {
					id = KoH_holy_orders.1 #Templar Creation
					days = -1
				}
			}
		}
	 	character:223523 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				}
				trigger_event = {
					id = KoH_holy_orders.2 #Hospitaller Creation
					days = -1
				}
			}
		}
		character:207510 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_holy_orders.5 #Calvatra Creation
					days = -1
				}
			}
		}
		character:207510 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_holy_orders.7 #Santigo creation
					days = -1
				}
			}
		}

		character:227012 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_holy_orders.102 #Assassin Buffs
					days = 1
				}
			}
		}
		character:227012 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_holy_orders.103 #Assassin Buffs
					days = -1
				}
			}
		}
	}
}
 
on_natural_death_second_chance = { #Added a perk requirement
	trigger = {
		has_perk = know_thyself_perk
	}
}

on_game_start_after_lobby = {
	on_actions = {
		KOH_holy_orders
		#MyMo_ongamestart
		khwarezmid_invasion
		KOH_Parition
	}
}

on_title_gain = {
	on_actions = {
		on_gain_HRE
		on_gain_holy_order
	}
}

khwarezmid_invasion = {
	effect = {
		title:k_khwarezmia.holder = {
			add_pressed_claim = title:k_persia
			add_pressed_claim = title:k_daylam
			add_pressed_claim = title:k_khorasan
		
			spawn_army = {
				uses_supply = no
				inheritable = no
				name = Khwarezmid_Army
				men_at_arms = {
					type = horse_archers
					stacks = 14
				}
				men_at_arms = {
					type = light_horsemen
					stacks = 10
				}
				men_at_arms = {
					type = light_horsemen
					stacks = 10
				}
				men_at_arms = {
					type = armored_horsemen
					stacks = 5
				}
				men_at_arms = {
					type = mangonel
					stacks = 5
				}
				men_at_arms = {
					type = mangonel
					stacks = 5
				}
				location = capital_province
			}
			spawn_army = {
				uses_supply = no
				inheritable = no
				name = Khwarezmid_Army
				levies = {
					value = 5000
				}
				men_at_arms = {
					type = horse_archers
					stacks = 10
				}
				men_at_arms = {
					type = horse_archers
					stacks = 10
				}
				men_at_arms = {
					type = light_horsemen
					stacks = 10
				}
				men_at_arms = {
					type = light_horsemen
					stacks = 10
				}
				men_at_arms = {
					type = armored_horsemen
					stacks = 3
				}
				men_at_arms = {
					type = mangonel
					stacks = 5
				}
				location = capital_province
			}
		}
	}
}

on_gain_holy_order = {
	effect = {
		if = {
			limit = { NOT = { has_trait = order_member } has_government = holy_order_county_government }
			add_trait = order_member
		}
	}
}

on_gain_HRE = {
	trigger = {
		scope:title = title:e_hre
	}
	effect = {
		title:e_hre.holder = {
			add_trait = KOH_Emperor
		}
		if = {
			limit = {
				exists = title:k_king_of_the_germans.holder
				this = title:k_king_of_the_germans.holder
			}
			trigger_event = {
				days = 1
				id = KOH_diets.1
			}
		}
	}
}

KOH_Italian_Familes = {
	effect = {
		title:c_cremona.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}}  
		title:c_mantua.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:k_genoa.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_bologna.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_modena.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_treviso.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_vercelli.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_lodi.holder = {if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_parma.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_ferrara.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_verona.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_padua.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_vicenza.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:k_venice.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}} 
		title:c_orvieto.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}}
		title:c_firenze.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}}
		title:c_lucca.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}}
		title:c_ancona.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_guelph }}}
		title:c_ravenna.holder = {add_trait = KOH_guelph } #Ravenna is a lowborn Bishop
		title:c_camaldoli.holder = {add_trait = KOH_guelph } #Camaldoli is a lowborn Bishop
		#neutral / hasn't sided fully
		#title:c_volterra

		title:c_arezzo.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}   
		title:c_assissi.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_como.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_forli.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_grosseto.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}  
		title:c_pavia.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:k_pisa.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_pistorja.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_spoleto.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_terni.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 
		title:c_urbino.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}} 	
		title:c_siena.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}
		title:c_prato.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}
		title:c_rimini.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}
		title:c_casentino.holder = { if = { limit = { exists = house } house = { add_house_modifier = dynasty_ghibelline }}}

		every_ruler = {
			limit = {
				exists = house
				house = {
					has_house_modifier = dynasty_guelph
				}
			}
			add_character_flag = guelph_cb
			add_trait = KOH_guelph
		}

		every_ruler = {
			limit = {
				exists = house
				house = {
					has_house_modifier = dynasty_ghibelline
				}
			}
			add_character_flag = ghibelline_cb
			add_trait = KOH_ghibelline
		}
	}
	on_actions = {
		delay = { months = 5 }
		KOH_Italian_Familes_Monthly
	}
}

KOH_Italian_Familes_Monthly = {
	on_actions = {
		delay = { months = 6 }
		KOH_Italian_Familes_Monthly
	}

	effect = {
		every_ruler = {
			limit = {
				AND = {
					exists = house
					house = {
						has_dynasty_modifier = dynasty_guelph
					}
					is_landed = yes
					is_adult = yes
					is_female = no
				}
			}
			add_character_flag = guelph_cb
			add_trait = KOH_guelph
		}

		every_ruler = {
			limit = {
				AND = {
					exists = house
					house = {
						has_dynasty_modifier = dynasty_ghibelline
					}
					is_landed = yes
					is_adult = yes
					is_female = no
				}
			}
			add_character_flag = ghibelline_cb
			add_trait = KOH_ghibelline
		}
	}
}

KOH_Parition = {
	effect = {
		parition = yes
	}
}

KOH_ON_START = {
	effect = {

		#khwarazmian
		character:230000 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				} 
				trigger_event = {
					id = khwarazmian_war_seljuk.0001
					days = {30 40} #Make higher later
				}
			}
		}

		#Assassin-Seljuk House Feud
		character:144228 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				} 
				trigger_event = {
					id = KOH_house_feuds.0001
					days = 13
				}
			}		
		}
	
		character:144056 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				} 
				trigger_event = {
					id = KOH_house_feuds.0002
					days = 13
				}
			} 
		}

		set_global_variable = {
			name = KOH_is_loaded
			value = yes
		}

		#make papacy not usurpable
		title:k_papal_state.holder = {
			set_global_variable = {
				name = papal_states
				value = title:k_papal_state
			}
		}
		
		# every_living_character = {
		# 	set_variable = {
		# 		name = Chivalry
		# 		value = 0
		# 	}
		# }
		#Makes Henry II not die early
		character:204500 = {
			add_character_modifier = {
				modifier = Heathly
				years = 5
			}
			if = {
				limit = {
					exits = global_var:CFP_is_loaded
				}
				hidden_effect_new_artifact = {
					set_artifact_rarity_illustrious = yes
					character:140 = {
						save_scope_as = owner
						create_artifact = {
							name = artifact_cfp_bayeux_tapestry_name
							description = placeholder # Will be regenerated in the post-creation effects
							template = cfp_bayeux_tapestry_template
							type = book
							visuals = cfp_bayeux_tapestry
							wealth = scope:wealth
							quality = scope:quality
							creator = character:148
							modifier = cfp_bayeux_tapestry_modifier
							save_scope_as = newly_created_artifact
							decaying = no
							history = {
								location = b_london.title_province
							}
						}
					}
					scope:newly_created_artifact = {
						set_artifact_description = artifact_cfp_bayeux_tapestry_description
						set_variable = { name = historical_unique_artifact value = yes }
						save_scope_as = epic

						set_owner = {
							target = character:204500
						}
					}
				}
			}
		}
		# #The Treaty of Falaise
		# character:204500 = {
		# 	make_tributary = {
		# 		TYPE = tributary_non_permanent
		# 		SUZERAIN = character:204500
		# 		TRIBUTARY = title:k_scotland.holder
		# 	}
		# }

		#Makes Baldwin live just a little longer
		character:223523 = {
			add_character_modifier = {
				modifier = Last_Burst_of_Energy
				years = 2
			}
		}
		#Increase the HRE's Vassal Limit
		character:212501 = { 
			add_character_modifier = {
				modifier = EmperorVassals
			}
		}
		title:e_hre.holder = {
			trigger_event = {
				id = KOH_Pentecost.1
				days = 40
			}
		}
		#Starts Balian's Event Chain
		character:223570 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				}
				trigger_event = {
					id = KoH_balians_adventure.1
					days = 1 
				}
			} 
		}
		#Starts Richard's Marriage Chain
		character:204510 = {
		   if = {
                limit = {
 					is_alive = yes
					}			
                trigger_event = {
                    id = KOH_richard_bride.1
                    days = 1
                }
			}
		}
		#Extended from above
		character:205506 = {
            if = {
                limit = {
					is_alive = yes
					}
                trigger_event = {
                    id = KOH_richard_bride.3
                    days = 1
                }
            }
		}
		#Extended from above
		character:204510 = {
		   if = {
                limit = {
 					is_alive = yes
					}			
                trigger_event = {
                    id = KOH_richard_bride.6
                    days = 2
                }
			}
		}
		#Buffs the world slightly, REMOVE THIS AFTER WORK IS BALANCED PROPERLY
		every_living_character = {
			if = {
				limit = {
					current_date >= 1183.1.1
				}
				trigger_event = {
					id = world_buffing.1
					#days = { 1 }
				}
			}
		}
		#Begins the Byzantine Crisis Chain
		character:215529 = {
			if = {
				limit = {
					is_alive = yes
					}
				trigger_event = {
					id = KoH_byzantinecrisis.1
					days = 474
				}
			}
			add_trait = stress_gain_remove
		}
		#Starts the Jerusalem Chain
		character:223590 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_saladin.105
					days = 100
				}
			}
		}
		#Extended from above
		title:e_arabia.holder = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_saladin.100
					days = 900
				}
			}
		}
		#Balian Marriage Chain
		character:223522 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KOH_balian_women.18
					days = 110
				}
			}
		}
		#Extended from above
		character:223570 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KOH_balian_women.25
					days = 130
				}
			}
		}
		#Tamar Marriage Chain
		character:466517 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KOH_georgian_wedding.1
					days = 1
				}
			}
		}
		#Extended from above
		character:466516 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KOH_georgian_wedding.8
					days = 1
				}
			}
		}
		
		character:204510 = {
			if = {
				 limit = {
					  is_alive = yes
					 }			
				 trigger_event = {
					 id = KoH_RichardTheLionheart.1
					 days = 100
				 }
			 }
		 }
		character:212430 = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_erfurt_affair.1
					days = 152
				}
			}
		}
		title:c_forez.holder = {
			if = {
				limit = {
					is_alive = yes
				}
				trigger_event = {
					id = KoH_religiousflavour.15
					days = 152
				}
			}
		}
		#Portugal Decision
		title:k_portugal.holder = {
			if = {
				limit = {
					is_alive = yes
				}
				add_to_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:form_portugal_decision
				}
				set_global_variable = {
					name = form_portugal_decision
					value = scope:portugal_former
				}
				every_sub_realm_county = {
					limit = {
						tier = tier_county
						culture = { has_cultural_pillar = heritage_iberian }
						OR = {
							de_jure_liege = title:d_porto
							de_jure_liege = title:d_coimbra
							de_jure_liege = title:d_beja
							de_jure_liege = title:d_algarve
						}
					}
					custom = portugese_convert_iberian_counties
					set_county_culture = culture:portuguese
				}
				add_prestige = massive_prestige_gain
			}
			#Fix the Struggle Stage
			if = {
				limit = {
					any_character_struggle = { is_struggle_type = iberian_struggle }
				}
				random_character_struggle = {
					limit = { is_struggle_type = iberian_struggle }
					change_struggle_phase = struggle_iberia_phase_hostility
				}
			}
		}

		# Starts Yusuf's Event Chain
		character:224000 = {
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				}
				trigger_event = {
					id = tib_abu_yaqub_yusuf_death.1
					days = 1 
				}
			} 
		}
	}
}

on_yearly_events = {
	random_events = {
		chance_to_happen = 25
		200 = 0

		100 = koh_encouage_war.2601
	}
}

yearly_global_pulse = {
	on_actions = {
        KOH_pulse_monthly
        delay = { months = 1 }
	}
}

KOH_yearly = {
	effect = {
		if = {
			limit = {
				has_game_rule = never_mongol_invasion
				NOT = { 
					has_global_variable = mongols_have_appeared
				}
				title:c_ulaanbaatar.holder = {
					is_ai = no
				}
			}
			random = {
				chance = temujin_appearance_base_chance
				modifier = {
					factor = 0.25
					current_date < 1180.1.1
				}
				modifier = {
					add = 11
					current_date > 1200.1.1
				}
				modifier = {
					add = 5
					current_date > 1220.1.1
				}
				modifier = {
					add = 5
					current_date > 1235.1.1
				}
				set_global_variable = {
					name = mongols_have_appeared
					value = yes
				}
				debug_log = "Attempting to spawn mongol invasion within 240 days"
				trigger_event = {
					id = mongol_invasion.0001
					days = { 2 240 }
				}
			}
		}
		else_if = {
			limit = {
				has_game_rule = random_mongol_invasion
				NOT = { has_global_variable = mongols_have_appeared}
			}
			random = {
				chance = temujin_appearance_base_chance
				modifier = {
					factor = 0.25
					current_date < 1180.1.1
				}
				modifier = {
					add = 3
					current_date > 1200.1.1
				}
				modifier = {
					add = 5
					current_date > 1220.1.1
				}
				modifier = {
					add = 5
					current_date > 1235.1.1
				}
				set_global_variable = {
					name = mongols_have_appeared
					value = yes
				}
				debug_log = "Attempting to spawn mongol invasion within 240 days"
				trigger_event = {
					id = mongol_invasion.0001
					days = { 2 240 }
				}
			}
		}
	}
}

on_raid_action_completion = {
	on_actions = {
		KOH_REYNALD_ACTION
	}
}



KOH_REYNALD_ACTION = {
	effect = {	
			if = {
				limit = {
					AND = {
						any_ruler = { 
							top_liege = { 
								has_primary_title = title:e_arabia 
							}
							
							has_opinion_modifier = {
								target = character:223590
								modifier = raided_me_opinion
							}
						}
					}
					character:226000 = {
						NOT = {	has_character_flag = Jihad_incoming }
					}
				}
				character:223523 = {
					trigger_event = {
					id = KoH_saladin.100
				}
			}
		}
	}
}

on_birth_child = {
	on_actions = {
		KOH_HENRYHENRY
	}
}

KOH_HENRYHENRY = {
	effect = {
		if = {
			limit = {
				root = {
					AND = {
						dynasty = dynasty:KOH_D_023
						is_male = yes
					}
				}
			}
			change_first_name = "Heinrich"
			add_trait = fecund
		}
	}	 
}

KOH_pulse_monthly = { 
    on_actions = {
        delay = { months = 1 }
		KOH_pulse_monthly
	}

	effect = {
		if = {
			limit = {
				any_ruler = { 
					top_liege = { 
						has_primary_title = title:e_arabia 
					}
					has_opinion_modifier = {
						target = character:223590
						modifier = raided_me_opinion
					} 
				}
				character:226000 = {
					NOT = {	has_character_flag = Jihad_incoming }
				}
			}
			character:223523 = {
				trigger_event = {
					id = KoH_saladin.100
				}
			}
		}
		if = {
			limit = {
				exists = global_var:SaladinHasTakenJerusalem 
			}
			every_ruler = {
				limit = {
					faith = faith:catholic
					is_landed = yes
					highest_held_title_tier >= tier_county
					NOT = { 
						OR = {
							has_character_flag = had_event_had_event_KoH_saladin.120
							has_title = title:k_jerusalem
						} 
					}
				}
			trigger_event = KoH_saladin.120
			}
		}
		if = {
			limit = {
				exists = global_var:SaladinHasTakenJerusalem 
			}
			every_ruler = {
				limit = {
					AND = {
						has_title = title:k_jerusalem
						NOT = {
							has_character_flag = had_event_KoH_saladin.121
						}
					}
				}
				trigger_event = KoH_saladin.121
			}
		}
	}
	# events = { 
	# 	KoH_SicillianConflict.1
    # }
}

three_year_playable_pulse = {
	on_actions = {
		delay = { days = 18 }
		KOH_events_tri_yearly_pulse
	}
}

KOH_events_tri_yearly_pulse = {
	random_events = {
		chance_of_no_event = {
			value = 30
			if = {
				limit = {
					is_at_war = yes # Won't get spammed while at war
				}
				add = 10
			}
		}
		23000 = 0 # 20000?
		
		# Dirt
		100 = chivalry.1	# Serfdom
		100 = chivalry.2		# A Duel
		100 = chivalry.6		# Change Fighting Stance
		10 = chivalry.9 		# Dragon? # THREE EVENTS NEED LOC
		100 = chivalry.11		# Adulter Knight #NEEDS LOC
		100 = chivalry.14		# Recruit a Knight #NEEDS LOC
		
		#100 = KoH_religiousflavour.15 #Chain, Waldensians in Lyon
		#Hashshashin's
		900 = KoH_hashshashin.101
		900 = KoH_hashshashin.7
		#generalgeneric
		100 = KoH_generalgeneric.1
		100 = KoH_generalgeneric.2
		100 = doublet.0001
	}
}

on_war_started = {
	on_actions = {
		KOH_on_war_started
	}
}

KOH_on_war_started = {
	effect = {
		if = {
			limit = {
				exists = title:e_hre.holder
				scope:defender = {
					has_trait = KOH_Free_City
					top_liege = title:e_hre.holder
				}
			}
			scope:defender = {
				save_scope_as = FreeCityDefender
			}
			title:e_hre.holder = {
				trigger_event = {
					id = KoH_FreeCity.1
					days = 3
				}
			}
		}
		#Has the instigator promised a vassal a war (vassal.2601)?
		if = {
			limit = {
				exists = var:KOH_promised_war
				var:KOH_promised_war = {
					is_alive = yes
					NOT = { this = scope:recipient }
				}
			}
			trigger_event = {
				id = koh_encouage_war.2610
				days = { 7 10 }
			}
		}
	}
}

on_war_won_attacker = {
	events = {
		KoH_SicillianConflict.2
	}
}

on_war_won_defender = {
	events = {
		KoH_SicillianConflict.2
	}
}
on_siege_completion={
events={
temujin.0009
}
}
# MyMo_ongamestart = {
# 	effect = {
# 		### MyMo : 50% of non county temple become monasteries ###
# 		every_province = {
# 			# limit = {
# 			# 	AND = {
# 			# 		county = {
# 			# 			holder = {
# 			# 				faith = { has_doctrine = tenet_monasticism }
# 			# 			}
# 			# 		}
# 			# 		has_holding_type = church_holding
# 			# 	}
# 			# }
# 			random = {
# 				chance = 50
# 				modifier = {
# 					factor = 0
# 					# List of baronies which will stay Temple
# 					mymo_historic_bishopric = yes
# 				}
# 				modifier = {
# 					factor = 2
# 					# List of baronies which will become Monastery
# 					mymo_historic_abbey = yes
# 				}
# 				modifier = {
# 					factor = 0
# 					is_county_capital = yes
# 					#no capital county but historical ones
# 					NOT = {
# 						# List of baronies which are county capital and will become Monastery
# 						mymo_historic_abbey_county_level = yes
# 					}
# 				}
# 				set_holding_type = monastery_holding
# 				save_scope_as = monastery_province
# 				create_character = {
# 					template = monk_character
# 					employer = scope:monastery_province.province_owner
# 					culture = scope:monastery_province.culture
# 					faith = scope:monastery_province.faith
# 					after_creation = {
# 						if = {
# 							limit = { scope:monastery_province = { is_county_capital = yes } }
# 							get_title = scope:monastery_province.county
# 						}
# 						else = {
# 							get_title = scope:monastery_province.barony
# 						}
# 						trigger_event = mymo.1
# 					}
# 				}
# 			}
# 		}
# 	}
# }