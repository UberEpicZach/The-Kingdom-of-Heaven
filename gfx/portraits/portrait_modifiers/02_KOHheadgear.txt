
KOHheadgear = {
	usage = game
	selection_behavior = max

	######################################################
	################## KINGDOM OF HEAVEN #################
	################## KINGDOM OF HEAVEN #################
	################## KINGDOM OF HEAVEN #################
	################## KINGDOM OF HEAVEN #################
	################## KINGDOM OF HEAVEN #################
	######################################################
	#KOH#
	imperial_no_portrait = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 2000
				has_character_flag = Free_City
			}
		}
	}

	portrait_dragon = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 2000
				has_trait = koh_dragon
			}
		}
	}
	
	french_war = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			morph = {
				mode = add
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}		
			accessory = {
				mode = add
				gene = headgearKOH
				template = french_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # larger than the western war headgear
				portrait_wear_helmet_trigger = yes
				portrait_french_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}	
									is_attacker = prev
								}
							}
						}
					}
				}	
			}
		}
	}
	
	###French war helmet closed face	
	french_war_closed = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			morph = {
				mode = modify
				gene = gene_chin_forward
				template = chin_forward_neg
				value = -1.0
		
			}
			morph = {
				mode = modify
				gene = gene_jaw_forward
				template = jaw_forward_pos
				value = -1.0
			}			
			morph = {
				mode = modify_multiply				
				gene = gene_bs_nose_forward
				template = nose_forward_neg				
				value = 1.0
			}		
			accessory = {
				mode = add
				gene = headgearKOH
				template = french_war_closed
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { is_female = yes }				
				portrait_wear_helmet_trigger = yes
				EPE_armor_era_late_medieval_trigger = yes	
				#NOT = { has_game_rule = never_epe_fullplate_helmets }	
				NOT = { has_game_rule = never_epe_fullface_helmets }					
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_french_clothing_trigger = yes
								AND = {
					portrait_iberia_clothing_trigger = yes	
						portrait_iberia_trigger = yes				
								}	
					portrait_dde_hre_clothing_trigger = yes	
					portrait_anglo_saxon_clothing_trigger = yes		
					portrait_italian_clothing_trigger = yes					
				}
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}	
	
	italian_war = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}		
		
			accessory = {
				mode = add
				gene = headgearKOH
				template = italian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # larger than the western war headgear
				portrait_wear_helmet_trigger = yes
				portrait_italian_clothing_trigger = yes
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}
	###Italian war helmet closed face	
	italian_war_closed = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			morph = {
				mode = modify
				gene = gene_chin_forward
				template = chin_forward_neg
				value = -1.0
		
			}
			morph = {
				mode = modify
				gene = gene_jaw_forward
				template = jaw_forward_pos
				value = -1.0
			}			
			morph = {
				mode = modify_multiply				
				gene = gene_bs_nose_forward
				template = nose_forward_neg				
				value = 1.0
			}		
			accessory = {
				mode = add
				gene = headgearKOH
				template = italian_war_closed
				range = { 0 1 } # For the randomness to work correctly
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { is_female = yes }				
				portrait_wear_helmet_trigger = yes
				EPE_culture_era_late_medieval_trigger = yes
				NOT = { has_game_rule = never_epe_fullplate_helmets }						
				OR = {
				portrait_italian_clothing_trigger = yes
					portrait_norman_sicily_knights_clothing_trigger = yes							
				}
				
				NOR = {
					AND = {
						religion = religion:christianity_religion
						has_government = holy_order_government
					}
					AND = {
						religion = religion:christianity_religion
						is_landed = no
						portrait_wear_armor_trigger = yes
						exists = liege
						liege = {
							has_government = holy_order_government
						}
					}
					AND = {
						religion = religion:christianity_religion
						portrait_wear_armor_trigger = yes
						OR = {
							any_character_war = {
								OR = {
									using_cb = undirected_great_holy_war
									using_cb = directed_great_holy_war
								}
								is_attacker = prev
							}
							any_liege_or_above = {
								faith = prev.faith
								any_character_war = {
									OR = {
										using_cb = undirected_great_holy_war
										using_cb = directed_great_holy_war
									}
									is_attacker = prev
								}
							}
						}
					}
				}
			}
		}
	}		
	baldwin = {
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_forehead_brow_forward
				template = forehead_brow_forward_neg
				value = -1.0
			}
			morph = {
				mode = modify
				gene = gene_bs_eye_upper_lid_size
				template = eye_upper_lid_size_neg
				value = -1.0
			}
			morph = {
				mode = modify
				gene = gene_bs_eye_fold_shape
				template = eye_fold_shape_pos
				value = -1.0
			}		
			accessory = {
				mode = add
				gene = baldwin_face_mask
				template = face_mask
				#value = 1.0
				range = { 1 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add				
				gene = special_headgear_head_bandage
				template = head_bandage
				value = 0.5
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgearKOH
				template = baldwin_sub_saharan_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_baldwin_trigger = yes
				is_female = no
				#is_at_war = yes
				#portrait_wear_armor_trigger = yes				
			}
			modifier = {
				add = 130
				this = character:223523
				#is_at_war = yes
				#portrait_wear_armor_trigger = yes	
			}
		}
	}
	
	# baldwin_clean = {
	# 	dna_modifiers = {
	# 		morph = {
	# 			mode = modify
	# 			gene = gene_bs_forehead_brow_forward
	# 			template = forehead_brow_forward_neg
	# 			value = -1.0
	# 		}
	# 		morph = {
	# 			mode = modify
	# 			gene = gene_bs_eye_upper_lid_size
	# 			template = eye_upper_lid_size_neg
	# 			value = -1.0
	# 		}
	# 		morph = {
	# 			mode = modify
	# 			gene = gene_bs_eye_fold_shape
	# 			template = eye_fold_shape_pos
	# 			value = -1.0
	# 		}		
	# 		accessory = {
	# 			mode = add
	# 			gene = baldwin_face_mask
	# 			template = face_mask_clean
	# 			#value = 1.0
	# 			range = { 1 1 } # For the randomness to work correctly
	# 		}
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = baldwin_sub_saharan_imperial
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 30
	# 			portrait_baldwin_trigger = yes
	# 			is_female = no
	# 			is_at_war = no
	# 			portrait_wear_armor_trigger = no				
	# 		}
	# 		modifier = {
	# 			add = 130
	# 			this = character:223523
	# 			is_at_war = no
	# 			portrait_wear_armor_trigger = no	
	# 		}
	# 	}
	# }
	saladin = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			accessory = {
				mode = add
				gene = headgearKOH
				template = ayyubid_royalty_war 
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_saladin_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:226000
			}
		}
	}
	richard_king = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			accessory = {
				
				mode = add
				gene = headgearKOH
				template = royal_helmet 
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 40
				AND = {
					portrait_richard_trigger = yes
					portrait_wear_armor_trigger = yes
					is_female = no
					OR = {
						highest_held_title_tier = tier_kingdom
						has_title = title:k_england
					}
				}
			}
			modifier = {
				add = 140
				AND = {
					portrait_wear_armor_trigger = yes
					this = character:204510
					OR = {
						highest_held_title_tier = tier_kingdom
						has_title = title:k_england
					}
				}
			}
		}
	}
	richard_not_king = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			accessory = {
				
				mode = add
				gene = headgearKOH
				template = royal_helmet_without_crown 
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_richard_trigger = yes
				portrait_wear_armor_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				portrait_wear_armor_trigger = yes
				this = character:204510
			}
		}
	}
	altair = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			accessory = {
				mode = add
				gene = headgear
				template = western_stealth
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_altair_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:KOH0030
			}
		}
	}
	sinan = {
		dna_modifiers = {
			accessory = {
				mode = add				
				gene = headgear
				template = no_headgear
				value = 0.5
			}
			accessory = {
				mode = add
				gene = headgear
				template = western_stealth
				#value = 100
				range = { 1 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 30
				portrait_sinan_trigger = yes
				is_female = no
			}
			modifier = {
				add = 130
				this = character:227012
			}
		}
	}
}