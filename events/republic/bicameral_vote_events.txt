namespace = bicameral_vote_events

bicameral_vote_events.1001 = { # Senate Vote - War Declaration
	type = character_event
	title = bicameral_vote_events.1001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_war_declaration
					}
				}
				desc = bicameral_vote_events.1001.desc.bhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_war_declaration
					}
				}
				desc = bicameral_vote_events.1001.desc.uhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_war_declaration
					}
				}
				desc = bicameral_vote_events.1001.desc.lhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_war_declaration
					}
				}
				desc = bicameral_vote_events.1001.desc.ld_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.bhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.uhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.lhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.ld_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_title_powers
					}
				}
				desc = bicameral_vote_events.1001.desc.bhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_title_powers
					}
				}
				desc = bicameral_vote_events.1001.desc.uhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_title_powers
					}
				}
				desc = bicameral_vote_events.1001.desc.lhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_title_powers
					}
				}
				desc = bicameral_vote_events.1001.desc.ld_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_life_title_term
					}
				}
				desc = bicameral_vote_events.1001.desc.life_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_twenty_year_term
					}
				}
				desc = bicameral_vote_events.1001.desc.twenty_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_ten_year_term
					}
				}
				desc = bicameral_vote_events.1001.desc.ten_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_four_year_term
					}
				}
				desc = bicameral_vote_events.1001.desc.four_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_two_year_term
					}
				}
				desc = bicameral_vote_events.1001.desc.two_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_one_year_term
					}
				}
				desc = bicameral_vote_events.1001.desc.one_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_culture_group_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.same_culture_group_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_all_cultures_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.all_cultures_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_culture_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.same_culture_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_religion_group_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.same_religion_group_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_all_religions_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.all_religions_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_faith_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.same_faith_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_de_jure_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.de_jure_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_de_facto_citizenship
					}
				}
				desc = bicameral_vote_events.1001.desc.de_facto_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:war_proposal
					}
				}
				desc = bicameral_vote_events.1001.desc.war_prop
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:revocation_proposal
					}
				}
				desc = bicameral_vote_events.1001.desc.revoke_prop
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:grants_proposal
					}
				}
				desc = bicameral_vote_events.1001.desc.grant_prop
			}
		}
	}
	trigger = {
		NOT = {
			exists = var:you_voted
		}
	}
	left_portrait = {
		character = root
		animation = bold
	}
	theme = diplomacy
	immediate = {
		house = {
			var:titular_republic = {
				save_scope_as = titular_republic
			}
		}
		if = {
			limit = { scope:titular_republic = { exists = var:war_proposal } }
			scope:titular_republic = {
				var:proposed_war_target = {
					save_scope_as = war_enemy
				}
			}
		}
		if = {
			limit = { scope:titular_republic = { exists = var:grants_proposal } }
			scope:titular_republic = {
				var:proposed_grant_target = {
					save_scope_as = grant_target
				}
			}
		}
		if = {
			limit = { scope:titular_republic = { exists = var:revocation_proposal } }
			scope:titular_republic = {
				var:proposed_revoke_target = {
					save_scope_as = revoke_target
				}
			}
		}
	}

	option = { # Yea
		name = bicameral_vote_events.1001.a
		custom_tooltip = BICAMERAL_VOTES_AYE
		scope:titular_republic = {
			every_in_list = {
				variable = republic_families_list
				limit = { has_variable = house_votes_yea }
				every_house_member = {
					add_opinion = {
						target = root
						modifier = voted_similarly
					}
				}
			}
			every_in_list = {
				variable = republic_families_list
				limit = { has_variable = house_votes_nay }
				every_house_member = {
					add_opinion = {
						target = root
						modifier = voted_differently
					}
				}
			}
		}
		set_variable = you_voted
		every_in_list = {
			variable = blackmailing_house_heads
			remove_variable = house_votes_nay
			set_variable = house_votes_yea
		}
		house = { set_variable = house_votes_yea }
	}

	option = { # Nay
		name = bicameral_vote_events.1001.b
		custom_tooltip = BICAMERAL_VOTES_NAY
		scope:titular_republic = {
			every_in_list = {
				variable = republic_families_list
				limit = { has_variable = house_votes_nay }
				every_house_member = {
					add_opinion = {
						target = root
						modifier = voted_similarly
					}
				}
			}
			every_in_list = {
				variable = republic_families_list
				limit = { has_variable = house_votes_yea }
				every_house_member = {
					add_opinion = {
						target = root
						modifier = voted_differently
					}
				}
			}
		}
		set_variable = you_voted
		every_in_list = {
			variable = blackmailing_house_heads
			remove_variable = house_votes_yea
			set_variable = house_votes_nay
		}
		house = { set_variable = house_votes_nay }
	}
}

bicameral_vote_events.1002 = { # Vote Over
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = {
				primary_title.houses_voting_aye > primary_title.houses_voting_nay
				primary_title.titles_voting_aye > primary_title.titles_voting_nay
				primary_title = {
					OR = {
						NAND = {
							has_variable = war_proposal
							has_variable = grants_proposal
							has_variable = revocation_proposal
							has_variable = law_voting_all_cultures_citizenship
							has_variable = law_voting_same_culture_citizenship
							has_variable = law_voting_same_culture_group_citizenship
							has_variable = law_voting_all_religions_citizenship
							has_variable = law_voting_same_faith_citizenship
							has_variable = law_voting_same_religion_group_citizenship
						}
						AND = {
							has_variable = both_houses_vote_war_declaration
							has_variable = war_proposal
						}
						AND = {
							has_variable = both_houses_vote_title_powers
							OR = {
								has_variable = grants_proposal
								has_variable = revocation_proposal
							}
						}
						AND = {
							has_variable = both_houses_vote_citizenship
							OR = {
								has_variable = law_voting_all_cultures_citizenship
								has_variable = law_voting_same_culture_citizenship
								has_variable = law_voting_same_culture_group_citizenship
								has_variable = law_voting_all_religions_citizenship
								has_variable = law_voting_same_faith_citizenship
								has_variable = law_voting_same_religion_group_citizenship
							}
						}
					}
				}
			}
			primary_title = {
				every_in_list = {
					variable = republic_families_list
					house_head = {
						trigger_event = bicameral_vote_events.1003
						set_variable = a
					}
				}
				if = {
					limit = { has_variable = law_voting_both_houses_vote_war_declaration }
					remove_variable = upper_house_vote_war_declaration
					remove_variable = lower_house_vote_war_declaration
					remove_variable = leaders_discretion_war_declaration
					set_variable = both_houses_vote_war_declaration
				}
				if = {
					limit = { has_variable = law_voting_upper_house_vote_war_declaration }
					remove_variable = both_houses_vote_war_declaration
					remove_variable = lower_house_vote_war_declaration
					remove_variable = leaders_discretion_war_declaration
					set_variable = upper_house_vote_war_declaration
				}
				if = {
					limit = { has_variable = law_voting_lower_house_vote_war_declaration }
					remove_variable = both_houses_vote_war_declaration
					remove_variable = upper_house_vote_war_declaration
					remove_variable = leaders_discretion_war_declaration
					set_variable = lower_house_vote_war_declaration
				}
				if = {
					limit = { has_variable = law_voting_leaders_discretion_war_declaration }
					remove_variable = upper_house_vote_war_declaration
					remove_variable = lower_house_vote_war_declaration
					set_variable = leaders_discretion_war_declaration
					remove_variable = both_houses_vote_war_declaration
				}

				if = {
					limit = { has_variable = law_voting_both_houses_vote_citizenship }
					remove_variable = upper_house_vote_citizenship
					remove_variable = lower_house_vote_citizenship
					remove_variable = leaders_discretion_citizenship
					set_variable = both_houses_vote_citizenship
				}
				if = {
					limit = { has_variable = law_voting_upper_house_vote_citizenship }
					remove_variable = both_houses_vote_citizenship
					remove_variable = lower_house_vote_citizenship
					remove_variable = leaders_discretion_citizenship
					set_variable = upper_house_vote_citizenship
				}
				if = {
					limit = { has_variable = law_voting_lower_house_vote_citizenship }
					remove_variable = both_houses_vote_citizenship
					remove_variable = upper_house_vote_citizenship
					remove_variable = leaders_discretion_citizenship
					set_variable = lower_house_vote_citizenship
				}
				if = {
					limit = { has_variable = law_voting_leaders_discretion_citizenship }
					remove_variable = upper_house_vote_citizenship
					remove_variable = lower_house_vote_citizenship
					set_variable = leaders_discretion_citizenship
					remove_variable = both_houses_vote_citizenship
				}

				if = {
					limit = { has_variable = law_voting_both_houses_vote_title_powers }
					remove_variable = upper_house_vote_title_powers
					remove_variable = lower_house_vote_title_powers
					remove_variable = leaders_discretion_title_powers
					set_variable = both_houses_vote_title_powers
				}
				if = {
					limit = { has_variable = law_voting_upper_house_vote_title_powers }
					remove_variable = both_houses_vote_title_powers
					remove_variable = lower_house_vote_title_powers
					remove_variable = leaders_discretion_title_powers
					set_variable = upper_house_vote_title_powers
				}
				if = {
					limit = { has_variable = law_voting_lower_house_vote_title_powers }
					remove_variable = both_houses_vote_title_powers
					remove_variable = upper_house_vote_title_powers
					remove_variable = leaders_discretion_title_powers
					set_variable = lower_house_vote_title_powers
				}
				if = {
					limit = { has_variable = law_voting_leaders_discretion_title_powers }
					remove_variable = upper_house_vote_title_powers
					remove_variable = lower_house_vote_title_powers
					set_variable = leaders_discretion_title_powers
					remove_variable = both_houses_vote_title_powers
				}

				if = {
					limit = { has_variable = law_voting_life_title_term }
					set_variable = life_title_term
					remove_variable = twenty_year_term
					remove_variable = ten_year_term
					remove_variable = four_year_term
					remove_variable = two_year_term
					remove_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_twenty_year_term }
					remove_variable = life_title_term
					set_variable = twenty_year_term
					remove_variable = ten_year_term
					remove_variable = four_year_term
					remove_variable = two_year_term
					remove_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_ten_year_term }
					remove_variable = life_title_term
					remove_variable = twenty_year_term
					set_variable = ten_year_term
					remove_variable = four_year_term
					remove_variable = two_year_term
					remove_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_four_year_term }
					remove_variable = life_title_term
					remove_variable = twenty_year_term
					remove_variable = ten_year_term
					set_variable = four_year_term
					remove_variable = two_year_term
					remove_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_two_year_term }
					remove_variable = life_title_term
					remove_variable = twenty_year_term
					remove_variable = ten_year_term
					remove_variable = four_year_term
					set_variable = two_year_term
					remove_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_one_year_term }
					remove_variable = life_title_term
					remove_variable = twenty_year_term
					remove_variable = ten_year_term
					remove_variable = four_year_term
					remove_variable = two_year_term
					set_variable = one_year_term
				}
				if = {
					limit = { has_variable = law_voting_same_culture_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_group_citizenship
					set_variable = same_culture_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_culture_group_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_citizenship
					set_variable = same_culture_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_cultures_citizenship }
					remove_variable = same_culture_group_citizenship
					remove_variable = same_culture_citizenship
					set_variable = all_cultures_citizenship
				}
	
				if = {
					limit = { has_variable = law_voting_same_faith_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_religion_group_citizenship
					set_variable = same_faith_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_religion_group_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_faith_citizenship
					set_variable = same_religion_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_religions_citizenship }
					remove_variable = same_religion_group_citizenship
					remove_variable = same_faith_citizenship
					set_variable = all_religions_citizenship
				}
	
				if = {
					limit = { has_variable = law_voting_de_jure_citizenship }
					remove_variable = de_facto_citizenship
					set_variable = de_jure_citizenship
				}
				if = {
					limit = { has_variable = law_voting_de_facto_citizenship }
					remove_variable = de_jure_citizenship
					set_variable = de_facto_citizenship
				}
	
				if = {
					limit = { has_variable = war_proposal }
					var:proposed_war_target = {
						save_scope_as = war_enemy
					}
					add_to_variable_list = {
						name = valid_war_targets_list
						target = scope:war_enemy
					}
				}
				if = {
					limit = { has_variable = revocation_proposal }
					var:proposed_revoke_target = {
						save_scope_as = revoke_target
					}
					add_to_variable_list = {
						name = valid_revocation_targets_list
						target = scope:revoke_target
					}
				}
				if = {
					limit = { has_variable = grants_proposal }
					var:proposed_grant_target = {
						save_scope_as = grant_target
					}
					add_to_variable_list = {
						name = valid_grant_targets_list
						target = scope:grant_target
					}
				}

				remove_list_variable = {
					name = proposed_laws_list
					target = scope:law_proposed
				}
			}
		}
		else_if = {
			limit = {
				primary_title.houses_voting_aye > primary_title.houses_voting_nay
				primary_title = {
					OR = {
						AND = {
							has_variable = upper_house_vote_war_declaration
							has_variable = war_proposal
						}
						AND = {
							has_variable = upper_house_vote_title_powers
							OR = {
								has_variable = grants_proposal
								has_variable = revocation_proposal
							}
						}
						AND = {
							has_variable = upper_house_vote_citizenship
							OR = {
								has_variable = law_voting_all_cultures_citizenship
								has_variable = law_voting_same_culture_citizenship
								has_variable = law_voting_same_culture_group_citizenship
								has_variable = law_voting_all_religions_citizenship
								has_variable = law_voting_same_faith_citizenship
								has_variable = law_voting_same_religion_group_citizenship
							}
						}
					}
				}
			}
			primary_title = {
				every_in_list = {
					variable = republic_families_list
					house_head = {
						trigger_event = bicameral_vote_events.1003
						set_variable = a
					}
				}
				if = {
					limit = { has_variable = law_voting_same_culture_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_group_citizenship
					set_variable = same_culture_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_culture_group_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_citizenship
					set_variable = same_culture_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_cultures_citizenship }
					remove_variable = same_culture_group_citizenship
					remove_variable = same_culture_citizenship
					set_variable = all_cultures_citizenship
				}

				if = {
					limit = { has_variable = law_voting_same_faith_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_religion_group_citizenship
					set_variable = same_faith_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_religion_group_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_faith_citizenship
					set_variable = same_religion_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_religions_citizenship }
					remove_variable = same_religion_group_citizenship
					remove_variable = same_faith_citizenship
					set_variable = all_religions_citizenship
				}

				if = {
					limit = { has_variable = law_voting_de_jure_citizenship }
					remove_variable = de_facto_citizenship
					set_variable = de_jure_citizenship
				}
				if = {
					limit = { has_variable = law_voting_de_facto_citizenship }
					remove_variable = de_jure_citizenship
					set_variable = de_facto_citizenship
				}

				if = {
					limit = { has_variable = war_proposal }
					var:proposed_war_target = {
						save_scope_as = war_enemy
					}
					add_to_variable_list = {
						name = valid_war_targets_list
						target = scope:war_enemy
					}
				}
				if = {
					limit = { has_variable = revocation_proposal }
					var:proposed_revoke_target = {
						save_scope_as = revoke_target
					}
					add_to_variable_list = {
						name = valid_revocation_targets_list
						target = scope:revoke_target
					}
				}
				if = {
					limit = { has_variable = grants_proposal }
					var:proposed_grant_target = {
						save_scope_as = grant_target
					}
					add_to_variable_list = {
						name = valid_grant_targets_list
						target = scope:grant_target
					}
				}
				remove_list_variable = {
					name = proposed_laws_list
					target = scope:law_proposed
				}
			}
		}
		else_if = {
			limit = {
				primary_title.titles_voting_aye > primary_title.titles_voting_nay
				primary_title = {
					OR = {
						AND = {
							has_variable = lower_house_vote_war_declaration
							has_variable = war_proposal
						}
						AND = {
							has_variable = lower_house_vote_title_powers
							OR = {
								has_variable = grants_proposal
								has_variable = revocation_proposal
							}
						}
						AND = {
							has_variable = lower_house_vote_citizenship
							OR = {
								has_variable = law_voting_all_cultures_citizenship
								has_variable = law_voting_same_culture_citizenship
								has_variable = law_voting_same_culture_group_citizenship
								has_variable = law_voting_all_religions_citizenship
								has_variable = law_voting_same_faith_citizenship
								has_variable = law_voting_same_religion_group_citizenship
							}
						}
					}
				}
			}
			primary_title = {
				every_in_list = {
					variable = republic_families_list
					house_head = {
						trigger_event = bicameral_vote_events.1003
						set_variable = a
					}
				}
				if = {
					limit = { has_variable = law_voting_same_culture_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_group_citizenship
					set_variable = same_culture_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_culture_group_citizenship }
					remove_variable = all_cultures_citizenship
					remove_variable = same_culture_citizenship
					set_variable = same_culture_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_cultures_citizenship }
					remove_variable = same_culture_group_citizenship
					remove_variable = same_culture_citizenship
					set_variable = all_cultures_citizenship
				}

				if = {
					limit = { has_variable = law_voting_same_faith_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_religion_group_citizenship
					set_variable = same_faith_citizenship
				}
				if = {
					limit = { has_variable = law_voting_same_religion_group_citizenship }
					remove_variable = all_religions_citizenship
					remove_variable = same_faith_citizenship
					set_variable = same_religion_group_citizenship
				}
				if = {
					limit = { has_variable = law_voting_all_religions_citizenship }
					remove_variable = same_religion_group_citizenship
					remove_variable = same_faith_citizenship
					set_variable = all_religions_citizenship
				}

				if = {
					limit = { has_variable = law_voting_de_jure_citizenship }
					remove_variable = de_facto_citizenship
					set_variable = de_jure_citizenship
				}
				if = {
					limit = { has_variable = law_voting_de_facto_citizenship }
					remove_variable = de_jure_citizenship
					set_variable = de_facto_citizenship
				}

				if = {
					limit = { has_variable = war_proposal }
					var:proposed_war_target = {
						save_scope_as = war_enemy
					}
					add_to_variable_list = {
						name = valid_war_targets_list
						target = scope:war_enemy
					}
				}
				if = {
					limit = { has_variable = revocation_proposal }
					var:proposed_revoke_target = {
						save_scope_as = revoke_target
					}
					add_to_variable_list = {
						name = valid_revocation_targets_list
						target = scope:revoke_target
					}
				}
				if = {
					limit = { has_variable = grants_proposal }
					var:proposed_grant_target = {
						save_scope_as = grant_target
					}
					add_to_variable_list = {
						name = valid_grant_targets_list
						target = scope:grant_target
					}
				}
				remove_list_variable = {
					name = proposed_laws_list
					target = scope:law_proposed
				}
			}
		}
		else = {
			primary_title = {
				every_in_list = {
					variable = republic_families_list
					house_head = {
						trigger_event = bicameral_vote_events.1003
						set_variable = b
					}
				}
				remove_list_variable = {
					name = proposed_laws_list
					target = scope:law_proposed
				}
			}
		}
		primary_title = {
			every_in_list = {
				variable = republic_families
				remove_variable = house_votes_yea
				remove_variable = house_votes_nay
			}
		}
		if = {
			limit = {
				primary_title = {
					any_in_list = {
						variable = proposed_laws_list
						exists = this
					}
				}
			}
			trigger_event = {
				id = bicameral_vote_events.1004
				days = 2
			}
		}
		else = {
			primary_title = {
				remove_variable = law_voting_both_houses_vote_war_declaration
				remove_variable = law_voting_lower_house_vote_war_declaration
				remove_variable = law_voting_higher_house_vote_war_declaration
				remove_variable = law_voting_leaders_discretion_war_declaration
				remove_variable = law_voting_both_houses_vote_citizenship
				remove_variable = law_voting_lower_house_vote_citizenship
				remove_variable = law_voting_higher_house_vote_citizenship
				remove_variable = law_voting_leaders_discretion_citizenship
				remove_variable = law_voting_both_houses_vote_title_powers
				remove_variable = law_voting_lower_house_vote_title_powers
				remove_variable = law_voting_higher_house_vote_title_powers
				remove_variable = law_voting_leaders_discretion_title_powers
				remove_variable = law_voting_life_title_term
				remove_variable = law_voting_twenty_year_term
				remove_variable = law_voting_ten_year_term
				remove_variable = law_voting_four_year_term
				remove_variable = law_voting_two_year_term
				remove_variable = law_voting_one_year_term
				remove_variable = law_voting_same_culture_citizenship
				remove_variable = law_voting_same_culture_group_citizenship
				remove_variable = law_voting_all_cultures_citizenship
				remove_variable = law_voting_same_faith_citizenship
				remove_variable = law_voting_same_religion_group_citizenship
				remove_variable = law_voting_all_religions_citizenship
				remove_variable = law_voting_de_jure_citizenship
				remove_variable = law_voting_de_facto_citizenship
				remove_variable = war_proposal
				remove_variable = grants_proposal
				remove_variable = revocation_proposal
				every_in_list = {
					variable = lower_house_counties
					remove_variable = county_votes_yea
					remove_variable = county_votes_nay
				}
			}
		}
	}
}

bicameral_vote_events.1003 = { # Senate Vote Results
	type = character_event
	title = bicameral_vote_events.1003.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_war_declaration
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.bhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_war_declaration
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.uhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_war_declaration
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.lhv_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_war_declaration
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.ld_war_declaration
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_citizenship
					}
				}
				desc = bicameral_vote_events.1003.desc.bhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.uhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.lhv_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.ld_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_both_houses_vote_title_powers
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.bhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_upper_house_vote_title_powers
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.uhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_lower_house_vote_title_powers
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.lhv_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_leaders_discretion_title_powers
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.ld_title_powers
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_life_title_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.life_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_twenty_year_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.twenty_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_ten_year_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.ten_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_four_year_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.four_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_two_year_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.two_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_one_year_term
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.one_term
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_culture_group_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.same_culture_group_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_all_cultures_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.all_cultures_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_culture_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.same_culture_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_religion_group_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.same_religion_group_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_all_religions_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.all_religions_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_same_faith_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.same_faith_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_de_jure_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.de_jure_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:law_voting_de_facto_citizenship
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.de_facto_citizenship
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:war_proposal
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.war_prop
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:grants_proposal
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.grants_prop
			}
			triggered_desc = {
				trigger = {
					scope:titular_republic = {
						exists = var:revocation_proposal
					}
					exists = var:a
				}
				desc = bicameral_vote_events.1003.desc.revoke_prop
			}
			triggered_desc = {
				trigger = {
					exists = var:b
				}
				desc = bicameral_vote_events.1003.desc.fail
			}
		}
	}
	left_portrait = {
		character = root
		animation = bold
	}
	theme = diplomacy

	immediate = {
		clear_variable_list = blackmailing_house_heads
	}

	option = { # Vote Passes Good
		name = republic_vote_events.1003.a
		trigger = { has_variable = a house = { has_variable = house_votes_yea } }
		house = { remove_variable = house_votes_yea remove_variable = house_votes_nay }
		remove_variable = a
		remove_variable = you_voted
		custom_tooltip = VOTE_PASSES
	}

	option = { # Vote Passes Bad
		name = republic_vote_events.1003.b
		trigger = { has_variable = a house = { has_variable = house_votes_nay } }
		house = { remove_variable = house_votes_yea remove_variable = house_votes_nay }
		remove_variable = a
		remove_variable = you_voted
		custom_tooltip = VOTE_PASSES
	}

	option = { # Vote Fails Good
		name = republic_vote_events.1003.c
		trigger = { has_variable = b house = { has_variable = house_votes_nay } }
		house = { remove_variable = house_votes_yea remove_variable = house_votes_nay }
		remove_variable = b
		remove_variable = you_voted
		custom_tooltip = VOTE_FAILS
	}

	option = { # Vote Fails Bad
		name = republic_vote_events.1003.d
		trigger = { has_variable = b house = { has_variable = house_votes_yea } }
		house = { remove_variable = house_votes_yea remove_variable = house_votes_nay }
		remove_variable = b
		remove_variable = you_voted
		custom_tooltip = VOTE_FAILS
	}

	option = {
		name = bicameral_vote_events.1003.a
		trigger = { has_variable = a NAND = { house = { has_variable = house_votes_yea has_variable = house_votes_nay } } }
		remove_variable = a
		custom_tooltip = VOTE_FAILS
	}

	option = {
		name = bicameral_vote_events.1003.b
		trigger = { has_variable = b NAND = { house = { has_variable = house_votes_yea has_variable = house_votes_nay } } }
		remove_variable = b
		custom_tooltip = VOTE_FAILS
	}
}

bicameral_vote_events.1004 = { # Vote Over
	type = character_event
	hidden = yes

	immediate = {
		primary_title = {
			remove_variable = law_voting_both_houses_vote_war_declaration
			remove_variable = law_voting_lower_house_vote_war_declaration
			remove_variable = law_voting_higher_house_vote_war_declaration
			remove_variable = law_voting_leaders_discretion_war_declaration
			remove_variable = law_voting_both_houses_vote_citizenship
			remove_variable = law_voting_lower_house_vote_citizenship
			remove_variable = law_voting_higher_house_vote_citizenship
			remove_variable = law_voting_leaders_discretion_citizenship
			remove_variable = law_voting_both_houses_vote_title_powers
			remove_variable = law_voting_lower_house_vote_title_powers
			remove_variable = law_voting_higher_house_vote_title_powers
			remove_variable = law_voting_leaders_discretion_title_powers
			remove_variable = law_voting_life_title_term
			remove_variable = law_voting_twenty_year_term
			remove_variable = law_voting_ten_year_term
			remove_variable = law_voting_four_year_term
			remove_variable = law_voting_two_year_term
			remove_variable = law_voting_one_year_term
			remove_variable = law_voting_same_culture_citizenship
			remove_variable = law_voting_same_culture_group_citizenship
			remove_variable = law_voting_all_cultures_citizenship
			remove_variable = law_voting_same_faith_citizenship
			remove_variable = law_voting_same_religion_group_citizenship
			remove_variable = law_voting_all_religions_citizenship
			remove_variable = law_voting_de_jure_citizenship
			remove_variable = law_voting_de_facto_citizenship
			remove_variable = war_proposal
			remove_variable = grants_proposal
			remove_variable = revocation_proposal
			every_in_list = {
				variable = lower_house_counties
				remove_variable = county_votes_yea
				remove_variable = county_votes_nay
			}
			bicameral_laws_voting = yes
		}
	}
}

bicameral_vote_events.1005 = { # Vote Over
	type = character_event
	hidden = yes

	immediate = {
		primary_title = {
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = {
						modifier = {
							always = yes
							add = $LAW_VOTE$_lower_house
						}
						set_variable = county_votes_yea
					}
					100 = {
						set_variable = county_votes_nay
					}
				}
			}
			if = {
				limit = { titles_voting_aye >= titles_voting_nay }
				every_in_list = {
					variable = republic_families_list
					house_head = {
						send_interface_toast = {
							left_icon = this
							title = LOWER_HOUSE_PASSES_A
						}
					}
				}
			}
			if = {
				limit = { titles_voting_aye < titles_voting_nay }
				every_in_list = {
					variable = republic_families_list
					house_head = {
						send_interface_toast = {
							left_icon = this
							title = LOWER_HOUSE_FAILS_A
						}
					}
				}
			}
		}
	}
}